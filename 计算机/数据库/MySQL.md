
# MySQL的存储引擎

InnoDB

MySQL的默认存储引擎，支持事务，行级锁，外键等

MyISAM

MySQL在5.1版本之前的默认存储引擎，由于并发性比较差，不支持外键和事务操作，默认的锁的粒度为表级锁


|      | InnoDB                        | MyISAM                      |
| ---- | ----------------------------- | --------------------------- |
| 外键   | 支持                            | 不支持                         |
| 事务   | 支持                            | 不支持                         |
| 锁    | 支持表锁和行锁                       | 只有表锁                        |
| 可恢复性 | 可以根据undolog修复                 | 无事务日志                       |
| 表结构  | 数据和索引是集中存储的文件格式为`.idb`和`.frm` | 数据和索引分开存储,数据`.MYD`,索引`.MYI` |
| 查询性能 | 一般情况相比于MyISAM稍差               | 比InnoDB好,但是新增和更新比InnoDB慢    |
| 索引   | 聚簇索引                          | 非聚簇索引                       |

## 数据库的三大范式

- 第一范式：确保每列保持原子性，数据表中的所有字段值都是不可分解的原子值。
- 第二范式：确保表中的每列都和主键相关
- 第三范式：确保每列都和主键列直接相关而不是间接相关

### MySQL的数据类型有哪些

- 整数
    
    TINYINT、SMALLINT、MEDIUMINT、INT、BIGINT分别占用8、16、24、32、64位存储空间。值得注意的是，INT(10)中的10只是表示显示字符的个数，并无实际意义。一般和UNSIGNED ZEROFILL配合使用才有实际意义，例如，数据类型INT(3)，属性为UNSIGNED ZEROFILL，如果插入的数据为3的话，实际存储的数据为003。
    
- 浮点数
    
    FLOAT、DOUBLE及DECIMAL为浮点数类型，DECIMAL是利用字符串进行处理的，能存储精确的小数。相比于FLOAT和DOUBLE，DECIMAL的效率更低些。FLOAT、DOUBLE及DECIMAL都可以指定列宽，例如FLOAT(5,2)表示一共5位，两位存储小数部分，三位存储整数部分。
    
- 字符串
    
    字符串常用的主要有CHAR和VARCHAR，VARCHAR主要用于存储可变长字符串，相比于定长的CHAR更节省空间。CHAR是定长的，根据定义的字符串长度分配空间。
    
    应用场景：对于经常变更的数据使用CHAR更好，CHAR不容易产生碎片。对于非常短的列也是使用CHAR更好些，CHAR相比于VARCHAR在效率上更高些。一般避免使用TEXT/BLOB等类型，因为查询时会使用临时表，造成严重的性能开销。
    
- 日期
    
    比较常用的有year、time、date、datetime、timestamp等，datetime保存从1000年到9999年的时间，精度位秒，使用8字节的存储空间，与时区无关。timestamp和UNIX的时间戳相同，保存从1970年1月1日午夜到2038年的时间，精度到秒，使用四个字节的存储空间，并且与时区相关。
    
    应用场景：尽量使用timestamp，相比于datetime它有着更高的空间效率。
    

## 索引　＊＊＊

#### 什么是索引？　

百度百科的解释：索引是对数据库表的一列或者多列的值进行排序一种结构，使用索引可以快速访问数据表中的特定信息。

#### 索引的优缺点？

优点：
- 大大加快数据检索的速度。
- 将随机I/O变成顺序I/O(因为B+树的叶子节点是连接在一起的)
- 加速表与表之间的连接
缺点：
- 从空间角度考虑，建立索引需要占用物理空间
- 从时间角度 考虑，创建和维护索引都需要花费时间，例如对数据进行增删改的时候都需要维护索引。

#### 索引的数据结构？

索引的数据结构主要有B+树和哈希表，对应的索引分别为B+树索引和哈希索引。InnoDB引擎的索引类型有B+树索引和哈希索引，默认的索引类型为B+树索引。