# 一、事务的特性（ACID）

原子性(atomicity)

事务过程中,所有操作要么全部成功,要么全部失败,原子操作是指不可再分割的最小操作单位

一致性(Consistency)

一个事务必须使数据库从一个一致性状态到另一个一致性状态.

> [!NOTE] 一致性
> 数据处于一种有意义的状态,这种状态是**语义**上的而不是**语法**上的
>
> 例如: A向B转账100块钱,A的账户上的钱减少了,但是B的账户上的钱没有增加,此时认为数据处于不一致的状态
>
>总体上说 一致性指的是 业务的逻辑是正确的,最后对数据的更改是符合业务逻辑的操作就是一致性

隔离性(Isolation)

事务之间不能互相干扰,即一个事务的操作和使用的数据对其他事务是隔离的,并发执行的事务之间不能相互干扰

事务之间的隔离也有级别

- 读未提交(read uncommitted)
- 读已提交(read committed)
- 可重复读(repeatable read)
- 串行化(serializable)

持久性(Durability)

事务的操作在提交之后,对数据库的改变是永久性的

# 二、MySQL中的事务操作

mysql中的事务默认是隐式事务，在执行insert，update，delete操作的时候数据库会自动开启事务并提交或回滚

是否开启隐式事务是由变量`autocommit`控制的

所以事务也分为**隐式事务**和**显式事务**

## 隐式事务

事务自动开启，提交，回滚，都由数据库内部自动控制

```sql
mysql> show variables like 'autocommit';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| autocommit   | ON   |
+---------------+-------+
1 row in set, 1 warning (0.00 sec)
```

autocommit为ON表示开启了自动提交。

## 显式事务

事务需要手动开启，提交，回滚，由开发者自己控制

