---
create_time: 2025-6-3
settlement_time:
  - 超弦空间: [[{weekday:1,hour:15},{weekday:3,hour:22}],[{weekday:4,hour:15},{weekday:7,hour:22}]]
  - 往世乐土: "[{weekday:1,hour:4},{weekday:7,hour:24}]"
banner: "[[bh3_banner.png]]"
banner_y: 0.2
banner_lock: true
---

```dataviewjs
const dt = dv.luxon.DateTime
let now = dt.now()
let weekday = now.weekday
// 当期深渊开始结束时间
let start_time
let finish_time

let show_text

if(weekday < 4){
	start_time=dt.fromObject({weekday:1,hour:15})
	finish_time=dt.fromObject({weekday:3,hour:22})
}else{
	start_time=dt.fromObject({weekday:5,hour:15})
	finish_time=dt.fromObject({weekday:7,hour:22})
}

if(start_time < now && now< finish_time){
	// 深渊开了
	let diff_time=finish_time.diff(now,["days","hours","minutes"]).toObject()
	if(diff_time.days!=0){
		show_text="距离深渊结算还有 **" + diff_time.days + "** 天,还不用着急"
	}else{
		show_text="距离深渊结算还有** "
		+diff_time.hours+"** 小时 ** "
		+parseInt(diff_time.minutes+1)+" ** 分,今天你打深渊了吗"
	}
}else{
	// 深渊没开
	let diff_time=start_time.diff(now,["days","hours","minutes"]).toObject()
	if(diff_time.days!=0){
		show_text="深渊还没开,下一期深渊将会在 **" + diff_time.days + "** 天后开启"
	}else{
		show_text="深渊还没开,下一期深渊将会在** "
		+diff_time.hours+"** 小时 ** "
		+parseInt(diff_time.minutes+1)+" ** 分钟后开启"
	}
}
dv.paragraph(show_text)
```

```dataviewjs

let settlement_time=(dv.current().file.frontmatter.settlement_time)
dv.span(settlement_time)
let keys=settlement_time.keys()
dv.span(keys)
for(let key in keys){
	dv.span(JSON.parse(settlement_time[key]))
}
```
